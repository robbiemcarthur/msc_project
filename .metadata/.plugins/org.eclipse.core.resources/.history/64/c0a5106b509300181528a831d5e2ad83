package main.Application;

import java.util.ArrayList;
import java.util.LinkedList;

import main.StudentGraph.KnowledgeGraph;
import main.StudentGraph.Lesson;

public class RouteController {
	private KnowledgeGraph graph;
	private boolean passed;
	private int visits;
	private final int MAX_VISITS = 3;

	public RouteController() {
		visits = 0;
		passed = false;
	}

	public KnowledgeGraph getRoute(ArrayList<KnowledgeGraph.Node> nodes) {
		Lesson lesson = new Lesson();
		for(int i = 0; i < nodes.size(); i = i+2)
		{
			int attempts = 0;
			while (!passed && attempts<MAX_VISITS)
			{
				lesson = (Lesson) nodes.get(i).getElement();
				lesson.setRandomGrade();
				if(lesson.getGrade()>40) {
					graph.addNode(lesson);
					graph.addEdge(nodes.get(i), nodes.get(i+2));
				}
				else {
					lesson.resitGrade(lesson.getGrade());
					graph.addNode(nodes.get(i++));
					graph.addEdge(nodes.get(i), nodes.get(i++));
				}
			}
		}
		return graph;
	}
}
